<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–π –º–∞–≥–∞–∑–∏–Ω</title>
    <style>
        /* –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –°–í–ï–¢–õ–û–ô –¢–ï–ú–´ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f8f8;
            color: #333;
            -webkit-tap-highlight-color: transparent;
            transition: background-color 0.3s, color 0.3s;
        }

        .app {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            padding-bottom: 70px;
            transition: background-color 0.3s;
        }

        /* –°–¢–ò–õ–ò –î–õ–Ø –¢–ï–ú–ù–û–ô –¢–ï–ú–´ */
        body.dark-theme {
            background: #121212;
            color: #e0e0e0;
        }

        body.dark-theme .app {
            background: #1e1e1e;
        }

        /* –ë–ï–ì–£–©–ê–Ø –°–¢–†–û–ö–ê */
        .marquee {
            background: linear-gradient(90deg, #ff6b6b, #2196F3);
            color: white;
            padding: 8px 0;
            overflow: hidden;
            position: relative;
            font-weight: 600;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .marquee-content {
            display: flex;
            animation: marquee 20s linear infinite;
            white-space: nowrap;
        }

        .marquee-content span {
            padding-right: 40px;
            display: inline-block;
        }

        @keyframes marquee {
            0% {
                transform: translateX(0);
            }
            100% {
                transform: translateX(-33.33%);
            }
        }

        /* –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ –° –ö–ê–¢–ï–ì–û–†–ò–Ø–ú–ò */
        .categories-wrapper {
            display: flex;
            align-items: center;
            background: white;
            border-bottom: 1px solid #eee;
            position: relative;
            padding: 0 40px;
            transition: background-color 0.3s, border-color 0.3s;
        }

        body.dark-theme .categories-wrapper {
            background: #1e1e1e;
            border-bottom-color: #333;
        }

        .scroll-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 32px;
            height: 32px;
            border: none;
            background: white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            cursor: pointer;
            font-size: 18px;
            color: #2196F3;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        body.dark-theme .scroll-btn {
            background: #2e2e2e;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .scroll-btn:hover {
            background: #f5f5f5;
            transform: translateY(-50%) scale(1.1);
        }

        body.dark-theme .scroll-btn:hover {
            background: #3e3e3e;
        }

        .scroll-left {
            left: 5px;
        }

        .scroll-right {
            right: 5px;
        }

        .categories {
            display: flex;
            overflow-x: auto;
            padding: 15px 0;
            gap: 12px;
            scrollbar-width: none;
            scroll-behavior: smooth;
            flex: 1;
        }

        .categories::-webkit-scrollbar {
            display: none;
        }

        .category {
            padding: 10px 18px;
            border-radius: 25px;
            background: #f5f5f5;
            white-space: nowrap;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
            flex-shrink: 0;
            border: 2px solid transparent;
            min-width: max-content;
        }

        body.dark-theme .category {
            background: #2e2e2e;
            color: #aaa;
        }

        .category.active {
            background: #2196F3;
            color: white;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
            border-color: #1976D2;
            transform: translateY(-1px);
        }

        .category:hover:not(.active) {
            background: #e3f2fd;
            color: #2196F3;
            border-color: #bbdefb;
        }

        body.dark-theme .category:hover:not(.active) {
            background: #2a3b4d;
            color: #64B5F6;
            border-color: #1e2a38;
        }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç */
        .content {
            min-height: calc(100vh - 150px);
            overflow-y: auto;
        }

        .page {
            display: none;
            min-height: calc(100vh - 150px);
        }

        .page.active {
            display: block;
        }

        .page-header {
            padding: 20px 15px 15px;
            border-bottom: 1px solid #eee;
            transition: border-color 0.3s;
        }

        body.dark-theme .page-header {
            border-bottom-color: #333;
        }

        .page-header h2 {
            font-size: 20px;
            color: #333;
            margin-bottom: 5px;
            transition: color 0.3s;
        }

        body.dark-theme .page-header h2 {
            color: #e0e0e0;
        }

        /* –¢–æ–≤–∞—Ä—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding: 15px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s;
        }

        body.dark-theme .product-card {
            background: #2e2e2e;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .product-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }

        body.dark-theme .product-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .product-image {
            width: 100%;
            height: 150px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-size: 14px;
            position: relative;
            overflow: hidden;
            transition: background 0.3s;
        }

        body.dark-theme .product-image {
            background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);
        }

        .product-image::before {
            content: "üì¶";
            font-size: 40px;
            opacity: 0.3;
        }

        .product-info {
            padding: 12px;
        }

        .product-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 14px;
            line-height: 1.4;
            height: 40px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            transition: color 0.3s;
        }

        body.dark-theme .product-title {
            color: #e0e0e0;
        }

        .product-desc {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            height: 32px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            transition: color 0.3s;
        }

        body.dark-theme .product-desc {
            color: #aaa;
        }

        .product-price {
            color: #2196F3;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 10px;
            transition: color 0.3s;
        }

        body.dark-theme .product-price {
            color: #64B5F6;
        }

        .add-to-cart {
            width: 100%;
            padding: 10px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .add-to-cart:hover {
            background: #1976D2;
        }

        body.dark-theme .add-to-cart {
            background: #64B5F6;
        }

        body.dark-theme .add-to-cart:hover {
            background: #42A5F5;
        }

        /* –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é */
        .bottom-menu {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            max-width: 500px;
            margin: 0 auto;
            display: flex;
            background: white;
            border-top: 1px solid #eee;
            padding: 8px 0;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            transition: background-color 0.3s, border-color 0.3s;
        }

        body.dark-theme .bottom-menu {
            background: #1e1e1e;
            border-top-color: #333;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
        }

        .menu-item {
            flex: 1;
            text-align: center;
            padding: 8px 5px;
            cursor: pointer;
            color: #666;
            opacity: 0.7;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 12px;
            position: relative;
            transition: color 0.3s ease;
        }

        body.dark-theme .menu-item {
            color: #aaa;
        }

        .menu-item.active {
            color: #2196F3;
            opacity: 1;
        }

        body.dark-theme .menu-item.active {
            color: #64B5F6;
        }

        .menu-item span:first-child {
            font-size: 20px;
            margin-bottom: 4px;
        }

        /* –ë–µ–π–¥–∂ –Ω–∞ –∫–æ—Ä–∑–∏–Ω–µ */
        .cart-badge {
            position: absolute;
            top: 0;
            right: 15px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .cart-badge.hidden {
            display: none;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã */
        .cart-items {
            padding: 15px;
            overflow-x: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-height: 200px;
        }

        .cart-items::-webkit-scrollbar {
            width: 6px;
        }

        .cart-items::-webkit-scrollbar-track {
            background: #f5f5f5;
            border-radius: 3px;
        }

        body.dark-theme .cart-items::-webkit-scrollbar-track {
            background: #2e2e2e;
        }

        .cart-items::-webkit-scrollbar-thumb {
            background: #2196F3;
            border-radius: 3px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            flex-shrink: 0;
            min-width: 100%;
            transition: background-color 0.3s;
        }

        body.dark-theme .cart-item {
            background: #2e2e2e;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        .cart-item-desc {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            max-width: 200px;
            transition: color 0.3s;
        }

        body.dark-theme .cart-item-desc {
            color: #aaa;
        }

        .cart-footer {
            padding: 20px 15px;
            background: white;
            border-top: 1px solid #eee;
            position: sticky;
            bottom: 70px;
            transition: all 0.3s ease;
        }

        body.dark-theme .cart-footer {
            background: #1e1e1e;
            border-top-color: #333;
        }

        .cart-footer.hidden {
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
        }

        .checkout-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .checkout-btn, .clear-btn {
            flex: 1;
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã */
        .cart-item-info {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
            transition: color 0.3s;
        }

        body.dark-theme .cart-item-title {
            color: #e0e0e0;
        }

        .cart-item-price {
            color: #2196F3;
            font-weight: 600;
            transition: color 0.3s;
        }

        body.dark-theme .cart-item-price {
            color: #64B5F6;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cart-item-quantity {
            font-weight: 600;
            transition: color 0.3s;
        }

        body.dark-theme .cart-item-quantity {
            color: #e0e0e0;
        }

        .cart-item-remove {
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 5px;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .empty-message {
            text-align: center;
            color: #888;
            padding: 40px 20px;
            font-size: 16px;
            transition: color 0.3s;
        }

        body.dark-theme .empty-message {
            color: #777;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 15px;
            padding: 0 5px;
            transition: color 0.3s;
        }

        body.dark-theme .cart-total {
            color: #e0e0e0;
        }

        .checkout-btn {
            width: 100%;
            padding: 16px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-bottom: 10px;
        }

        .checkout-btn:hover {
            background: #1976D2;
        }

        body.dark-theme .checkout-btn {
            background: #64B5F6;
        }

        body.dark-theme .checkout-btn:hover {
            background: #42A5F5;
        }

        .clear-btn {
            width: 100%;
            padding: 12px;
            background: #f5f5f5;
            color: #666;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.3s ease, color 0.3s;
        }

        .clear-btn:hover {
            background: #e0e0e0;
        }

        body.dark-theme .clear-btn {
            background: #2e2e2e;
            color: #aaa;
        }

        body.dark-theme .clear-btn:hover {
            background: #3e3e3e;
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è */
        .profile-info {
            padding: 20px 15px;
        }

        .profile-card {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            border-radius: 15px;
            padding: 30px 20px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
        }

        .profile-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .profile-section {
            margin-bottom: 25px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: background-color 0.3s;
        }

        body.dark-theme .profile-section {
            background: #2e2e2e;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .profile-section h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #333;
            transition: color 0.3s;
        }

        body.dark-theme .profile-section h3 {
            color: #e0e0e0;
        }

        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            transition: border-color 0.3s;
        }

        body.dark-theme .settings-item {
            border-bottom-color: #333;
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #2196F3;
        }

        body.dark-theme input:checked + .slider {
            background-color: #64B5F6;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .support-btn {
            background: #f5f5f5;
            color: #666;
            cursor: not-allowed;
            opacity: 0.7;
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        body.dark-theme .support-btn {
            background: #2e2e2e;
            color: #aaa;
        }

        .logout-btn {
            width: 100%;
            padding: 15px;
            background: #f5f5f5;
            color: #666;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        .logout-btn:hover {
            background: rgba(255, 68, 68, 0.1);
            color: #ff4444;
        }

        body.dark-theme .logout-btn {
            background: #2e2e2e;
            color: #aaa;
        }

        body.dark-theme .logout-btn:hover {
            background: rgba(255, 68, 68, 0.2);
            color: #ff6b6b;
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–û –º–∞–≥–∞–∑–∏–Ω–µ" */
        .about-content {
            padding: 20px 15px;
        }

        .about-card {
            background: white;
            border-radius: 15px;
            padding: 25px 20px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: background-color 0.3s;
        }

        body.dark-theme .about-card {
            background: #2e2e2e;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .about-card h3 {
            color: #2196F3;
            margin-bottom: 10px;
            font-size: 20px;
        }

        body.dark-theme .about-card h3 {
            color: #64B5F6;
        }

        .about-section {
            margin-bottom: 25px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: background-color 0.3s;
        }

        body.dark-theme .about-section {
            background: #2e2e2e;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .about-section h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #333;
            transition: color 0.3s;
        }

        body.dark-theme .about-section h3 {
            color: #e0e0e0;
        }

        .step {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 8px;
            transition: background-color 0.3s;
        }

        body.dark-theme .step {
            background: #3e3e3e;
        }

        .step-number {
            background: #2196F3;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }

        .step-text {
            flex: 1;
            transition: color 0.3s;
        }

        body.dark-theme .step-text {
            color: #e0e0e0;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 350px) {
            .products-grid {
                grid-template-columns: 1fr;
                gap: 10px;
                padding: 10px;
            }
            
            .product-image {
                height: 120px;
            }
            
            .menu-item span:first-child {
                font-size: 18px;
            }
            
            .menu-item span:last-child {
                font-size: 11px;
            }
            
            .scroll-btn {
                width: 28px;
                height: 28px;
                font-size: 16px;
            }
            
            .categories {
                gap: 8px;
                padding: 12px 0;
            }
            
            .category {
                padding: 8px 14px;
                font-size: 13px;
            }
        }
    </style>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="app">
        <!-- –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ -->
        <div class="marquee">
            <div class="marquee-content">
                <span>üî• –ê–∫—Ü–∏—è! ‚Ä¢ –°–∫–∏–¥–∫–∞ 10% –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ ‚Ä¢ –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ ‚Ä¢ </span>
                <span>üî• –ê–∫—Ü–∏—è! ‚Ä¢ –°–∫–∏–¥–∫–∞ 10% –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ ‚Ä¢ –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ ‚Ä¢ </span>
                <span>üî• –ê–∫—Ü–∏—è! ‚Ä¢ –°–∫–∏–¥–∫–∞ 10% –Ω–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ ‚Ä¢ –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ ‚Ä¢ </span>
            </div>
        </div>

        <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
        <div class="categories-wrapper">
            <button class="scroll-btn scroll-left" id="scrollLeft">‚Äπ</button>
            <div id="categories" class="categories">
                <div class="category active">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</div>
                <div class="category">–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞</div>
                <div class="category">–û–¥–µ–∂–¥–∞</div>
                <div class="category">–ö–Ω–∏–≥–∏</div>
                <div class="category">–î–ª—è –¥–æ–º–∞</div>
                <div class="category">–°–ø–æ—Ä—Ç</div>
                <div class="category">–ö—Ä–∞—Å–æ—Ç–∞</div>
                <div class="category">–ò–≥—Ä—É—à–∫–∏</div>
                <div class="category">–ê–≤—Ç–æ—Ç–æ–≤–∞—Ä—ã</div>
                <div class="category">–•–æ–±–±–∏</div>
            </div>
            <button class="scroll-btn scroll-right" id="scrollRight">‚Ä∫</button>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="content">
            <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ -->
            <div id="main-page" class="page active">
                <div id="products" class="products-grid">
                    <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>

            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
            <div id="cart-page" class="page">
                <div class="page-header">
                    <h2>üõí –ö–æ—Ä–∑–∏–Ω–∞</h2>
                    <p id="cart-empty" class="empty-message" style="display: none;">–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
                </div>
                <div id="cart-items" class="cart-items">
                    <!-- –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ -->
                </div>
                <div class="cart-footer hidden">
                    <div class="cart-total">
                        <span>–ò—Ç–æ–≥–æ:</span>
                        <span id="total-price">0 ‚ÇΩ</span>
                    </div>
                    <div class="checkout-buttons">
                        <button id="checkout-btn" class="checkout-btn">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                        <button id="clear-cart" class="clear-btn">–û—á–∏—Å—Ç–∏—Ç—å</button>
                    </div>
                </div>
            </div>

            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
            <div id="profile-page" class="page">
                <div class="page-header">
                    <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
                </div>
                <div class="profile-info">
                    <div class="profile-card">
                        <div class="profile-name" id="profile-name">–ì–æ—Å—Ç—å</div>
                    </div>
                    
                    <div class="profile-section">
                        <h3>üì¶ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h3>
                        <p class="empty-message">–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>
                    </div>
                    
                    <div class="profile-section">
                        <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <div class="settings-item">
                            <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                            <label class="switch">
                                <input type="checkbox" checked id="notifications-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="settings-item">
                            <span>–¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
                            <label class="switch">
                                <input type="checkbox" id="theme-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="settings-item">
                            <span>–Ø–∑—ã–∫</span>
                            <span>–†—É—Å—Å–∫–∏–π</span>
                        </div>
                    </div>
                    
                    <button class="support-btn" id="support-btn">üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
                    <button class="logout-btn">üö™ –í—ã–π—Ç–∏</button>
                </div>
            </div>

            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–û –º–∞–≥–∞–∑–∏–Ω–µ" -->
            <div id="about-page" class="page">
                <div class="page-header">
                    <h2>‚ÑπÔ∏è –û –º–∞–≥–∞–∑–∏–Ω–µ</h2>
                </div>
                <div class="about-content">
                    <div class="about-card">
                        <h3>üõçÔ∏è –ú–æ–π –º–∞–≥–∞–∑–∏–Ω</h3>
                        <p>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –ª—é–±–æ–π –≤–∫—É—Å.</p>
                        <p>–®–∏—Ä–æ–∫–∏–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç, –±—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –∏ –ø—Ä–∏—è—Ç–Ω—ã–µ —Ü–µ–Ω—ã.</p>
                    </div>
                    
                    <div class="about-section">
                        <h3>üì¶ –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑</h3>
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-text">–í—ã–±–∏—Ä–∞–µ—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ</div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-text">–û—Ñ–æ—Ä–º–ª—è–µ—Ç–µ –∑–∞–∫–∞–∑ –≤ Mini App</div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-text">–û–∂–∏–¥–∞–µ—Ç–µ –¥–æ—Å—Ç–∞–≤–∫—É –∫—É—Ä—å–µ—Ä–æ–º</div>
                        </div>
                    </div>
                    
                    <div class="about-section">
                        <h3>üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                        <p>–ü–æ–¥–¥–µ—Ä–∂–∫–∞: –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞</p>
                        <p>–î–æ—Å—Ç–∞–≤–∫–∞: –ø–æ –≤—Å–µ–º—É –≥–æ—Ä–æ–¥—É</p>
                        <p>–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 9:00-21:00</p>
                    </div>
                    
                    <div class="about-section">
                        <h3>üöö –î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</h3>
                        <p>‚Ä¢ –ö—É—Ä—å–µ—Ä—Å–∫–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ 1-2 –¥–Ω—è</p>
                        <p>‚Ä¢ –°–∞–º–æ–≤—ã–≤–æ–∑ –∏–∑ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏</p>
                        <p>‚Ä¢ –û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π –∏–ª–∏ –Ω–∞–ª–∏—á–Ω—ã–º–∏</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é (–í–°–ï–ì–î–ê –í–ò–î–ò–ú–û) -->
        <div class="bottom-menu">
            <div class="menu-item active" data-page="main">
                <span>üè†</span>
                <span>–ö–∞—Ç–∞–ª–æ–≥</span>
            </div>
            <div class="menu-item" data-page="cart">
                <span>üõí</span>
                <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
                <span class="cart-badge hidden">0</span>
            </div>
            <div class="menu-item" data-page="profile">
                <span>üë§</span>
                <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
            </div>
            <div class="menu-item" data-page="about">
                <span>‚ÑπÔ∏è</span>
                <span>–û –Ω–∞—Å</span>
            </div>
        </div>
    </div>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.setHeaderColor('#2196F3');

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let state = {
            cart: [],
            balance: 500,
            currentPage: 'main',
            selectedCategory: '–í—Å–µ —Ç–æ–≤–∞—Ä—ã',
            theme: 'light',
            notifications: true
        };

        // –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞
        let botIsOnline = false;
        const BOT_CHECK_INTERVAL = 30000; // 30 —Å–µ–∫—É–Ω–¥

        // –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–æ–≤
        const products = [
            { id: 1, name: "üì± –°–º–∞—Ä—Ç—Ñ–æ–Ω Xiaomi", price: 19900, category: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞", desc: "–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–º–∞—Ä—Ç—Ñ–æ–Ω —Å —Ö–æ—Ä–æ—à–µ–π –∫–∞–º–µ—Ä–æ–π" },
            { id: 2, name: "üéß –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–µ –Ω–∞—É—à–Ω–∏–∫–∏", price: 3200, category: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞", desc: "–ù–∞—É—à–Ω–∏–∫–∏ —Å —à—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ–º" },
            { id: 3, name: "üëï –§—É—Ç–±–æ–ª–∫–∞ –º—É–∂—Å–∫–∞—è", price: 1500, category: "–û–¥–µ–∂–¥–∞", desc: "–•–ª–æ–ø–∫–æ–≤–∞—è —Ñ—É—Ç–±–æ–ª–∫–∞, —Ä–∞–∑–º–µ—Ä—ã S-XXL" },
            { id: 4, name: "üìö –ö–Ω–∏–≥–∞ '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ'", price: 1200, category: "–ö–Ω–∏–≥–∏", desc: "–£—á–µ–±–Ω–∏–∫ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö" },
            { id: 5, name: "üèÄ –ë–∞—Å–∫–µ—Ç–±–æ–ª—å–Ω—ã–π –º—è—á", price: 2500, category: "–°–ø–æ—Ä—Ç", desc: "–ú—è—á –¥–ª—è –∏–≥—Ä—ã –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª" },
            { id: 6, name: "üíÑ –ù–∞–±–æ—Ä –∫–æ—Å–º–µ—Ç–∏–∫–∏", price: 2800, category: "–ö—Ä–∞—Å–æ—Ç–∞", desc: "–ù–∞–±–æ—Ä –¥–ª—è –º–∞–∫–∏—è–∂–∞, 10 –ø—Ä–µ–¥–º–µ—Ç–æ–≤" },
            { id: 7, name: "üß∏ –ü–ª—é—à–µ–≤—ã–π –º–µ–¥–≤–µ–¥—å", price: 1800, category: "–ò–≥—Ä—É—à–∫–∏", desc: "–ë–æ–ª—å—à–æ–π –º—è–≥–∫–∏–π –º–µ–¥–≤–µ–¥—å 50—Å–º" },
            { id: 8, name: "üöó –ß–µ—Ö–æ–ª –¥–ª—è –∞–≤—Ç–æ", price: 3200, category: "–ê–≤—Ç–æ—Ç–æ–≤–∞—Ä—ã", desc: "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —á–µ—Ö–æ–ª –Ω–∞ —Å–∏–¥–µ–Ω—å–µ" },
            { id: 9, name: "üé® –ù–∞–±–æ—Ä –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è", price: 1900, category: "–•–æ–±–±–∏", desc: "24 —Ü–≤–µ—Ç–∞, –∫–∏—Å—Ç–∏ –∏ –±—É–º–∞–≥–∞" },
            { id: 10, name: "‚òï –ö–æ—Ñ–µ–º–∞—à–∏–Ω–∞", price: 8900, category: "–î–ª—è –¥–æ–º–∞", desc: "–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –∫–æ—Ñ–µ–º–∞—à–∏–Ω–∞ –¥–ª—è –¥–æ–º–∞" },
            { id: 11, name: "‚åö –£–º–Ω—ã–µ —á–∞—Å—ã", price: 4500, category: "–≠–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞", desc: "–§–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–∫–µ—Ä —Å —Å–µ–Ω—Å–æ—Ä–Ω—ã–º —ç–∫—Ä–∞–Ω–æ–º" },
            { id: 12, name: "üëó –ü–ª–∞—Ç—å–µ –≤–µ—á–µ—Ä–Ω–µ–µ", price: 5500, category: "–û–¥–µ–∂–¥–∞", desc: "–≠–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ –ø–ª–∞—Ç—å–µ –¥–ª—è –≤–µ—á–µ—Ä–∞" }
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', () => {
            initApp();
            setupEventListeners();
            setupCategoryScrolling();
            setupCartScrolling();
            showPage('main');
            renderProducts();
            updateCartBadge();
            loadUserProfile();
            initBotStatusChecker(); // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function initApp() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ localStorage –µ—Å–ª–∏ –µ—Å—Ç—å
            const savedState = localStorage.getItem('shopState');
            if (savedState) {
                const parsed = JSON.parse(savedState);
                state.cart = parsed.cart || [];
                state.balance = parsed.balance || 500;
                state.selectedCategory = parsed.selectedCategory || '–í—Å–µ —Ç–æ–≤–∞—Ä—ã';
                state.theme = parsed.theme || 'light';
                state.notifications = parsed.notifications !== undefined ? parsed.notifications : true;
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–º—É
            if (state.theme === 'dark') {
                document.body.classList.add('dark-theme');
                document.getElementById('theme-toggle').checked = true;
                tg.setBackgroundColor('#121212');
            } else {
                tg.setBackgroundColor('#f8f8f8');
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            document.getElementById('notifications-toggle').checked = state.notifications;
            
            console.log('–ú–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω');
        }

        // ============ –ü–†–û–í–ï–†–ö–ê –°–¢–ê–¢–£–°–ê –ë–û–¢–ê ============
        
        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞
        async function checkBotStatus() {
            try {
                console.log('üîç –ü—Ä–æ–≤–µ—Ä—è—é —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞...');
                
                // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª—é–±–æ–π –ø—É–±–ª–∏—á–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç Telegram API
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 5000);
                
                const response = await fetch(`https://api.telegram.org/bot${tg.initDataUnsafe.user?.id || 'test'}/getMe`, {
                    method: 'GET',
                    signal: controller.signal
                }).catch(() => null);
                
                clearTimeout(timeoutId);
                
                // –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç (–¥–∞–∂–µ –æ—à–∏–±–∫—É), –∑–Ω–∞—á–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –µ—Å—Ç—å
                botIsOnline = response !== null;
                
                if (!botIsOnline) {
                    console.log('üî¥ –ë–æ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                    showBotOfflineMessage();
                } else {
                    console.log('üü¢ –ë–æ—Ç –æ–Ω–ª–∞–π–Ω');
                    hideBotOfflineMessage();
                }
                
                return botIsOnline;
            } catch (error) {
                console.log('üî¥ –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–æ—Ç–∞:', error);
                botIsOnline = false;
                showBotOfflineMessage();
                return false;
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –±–æ—Ç –≤—ã–∫–ª—é—á–µ–Ω
        function showBotOfflineMessage() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ —É–∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (document.getElementById('bot-offline-message')) return;
            
            const message = document.createElement('div');
            message.id = 'bot-offline-message';
            message.innerHTML = `
                <div style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.8);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10001;
                    padding: 20px;
                ">
                    <div style="
                        background: ${state.theme === 'dark' ? '#2e2e2e' : 'white'};
                        color: ${state.theme === 'dark' ? '#e0e0e0' : '#333'};
                        border-radius: 15px;
                        padding: 30px;
                        max-width: 400px;
                        width: 100%;
                        text-align: center;
                        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                    ">
                        <div style="font-size: 48px; margin-bottom: 20px;">üî¥</div>
                        <h3 style="margin: 0 0 15px 0; color: #ff4444;">–ú–∞–≥–∞–∑–∏–Ω –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</h3>
                        <p style="margin-bottom: 20px; color: ${state.theme === 'dark' ? '#aaa' : '#666'};">
                            –ë–æ—Ç –º–∞–≥–∞–∑–∏–Ω–∞ –≤—ã–∫–ª—é—á–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –ø–æ–∑–∂–µ –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ /start –±–æ—Ç—É.
                        </p>
                        <button onclick="location.reload()" style="
                            padding: 12px 24px;
                            background: #2196F3;
                            color: white;
                            border: none;
                            border-radius: 10px;
                            font-weight: 600;
                            cursor: pointer;
                        ">
                            –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(message);
            
            // –ë–ª–æ–∫–∏—Ä—É–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
            document.querySelectorAll('button, .category, .menu-item, .add-to-cart').forEach(el => {
                el.style.pointerEvents = 'none';
                el.style.opacity = '0.5';
            });
        }

        // –°–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –±–æ—Ç –≤—ã–∫–ª—é—á–µ–Ω
        function hideBotOfflineMessage() {
            const message = document.getElementById('bot-offline-message');
            if (message) {
                message.remove();
            }
            
            // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
            document.querySelectorAll('button, .category, .menu-item, .add-to-cart').forEach(el => {
                el.style.pointerEvents = 'auto';
                el.style.opacity = '1';
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞
        function initBotStatusChecker() {
            // –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            setTimeout(checkBotStatus, 1000);
            
            // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
            setInterval(checkBotStatus, BOT_CHECK_INTERVAL);
            
            // –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.addEventListener('click', () => {
                checkBotStatus();
            });
        }

        // ============ –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ============
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        function saveState() {
            localStorage.setItem('shopState', JSON.stringify({
                cart: state.cart,
                balance: state.balance,
                selectedCategory: state.selectedCategory,
                theme: state.theme,
                notifications: state.notifications
            }));
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
        function loadUserProfile() {
            try {
                const user = tg.initDataUnsafe.user;
                if (user) {
                    // –ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è
                    const firstName = user.first_name || '';
                    const lastName = user.last_name || '';
                    const fullName = [firstName, lastName].filter(Boolean).join(' ');
                    
                    document.getElementById('profile-name').textContent = fullName || '–ì–æ—Å—Ç—å';
                    
                    console.log('–ü—Ä–æ—Ñ–∏–ª—å Telegram –∑–∞–≥—Ä—É–∂–µ–Ω:', user);
                } else {
                    console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–æ—Å—Ç–µ–≤–∞—è —É—á–µ—Ç–∫–∞');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error);
            }
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        function setupCategoryScrolling() {
            const categories = document.querySelector('.categories');
            const scrollLeft = document.getElementById('scrollLeft');
            const scrollRight = document.getElementById('scrollRight');
            
            if (!categories || !scrollLeft || !scrollRight) return;
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–ª–µ–≤–æ
            scrollLeft.addEventListener('click', () => {
                categories.scrollBy({
                    left: -150,
                    behavior: 'smooth'
                });
            });
            
            // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–ø—Ä–∞–≤–æ
            scrollRight.addEventListener('click', () => {
                categories.scrollBy({
                    left: 150,
                    behavior: 'smooth'
                });
            });
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –µ—Å–ª–∏ –Ω–µ—á–µ–≥–æ —Å–∫—Ä–æ–ª–ª–∏—Ç—å
            const updateScrollButtons = () => {
                const scrollLeftVisible = categories.scrollLeft > 0;
                const scrollRightVisible = 
                    categories.scrollLeft < categories.scrollWidth - categories.clientWidth - 1;
                
                scrollLeft.style.opacity = scrollLeftVisible ? '1' : '0.3';
                scrollLeft.style.cursor = scrollLeftVisible ? 'pointer' : 'default';
                
                scrollRight.style.opacity = scrollRightVisible ? '1' : '0.3';
                scrollRight.style.cursor = scrollRightVisible ? 'pointer' : 'default';
            };
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
            categories.addEventListener('scroll', updateScrollButtons);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            setTimeout(updateScrollButtons, 100);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ
            window.addEventListener('resize', updateScrollButtons);
        }

        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã
        function setupCartScrolling() {
            const cartItems = document.getElementById('cart-items');
            if (!cartItems) return;
            
            let isScrolling = false;
            let startX;
            let scrollLeft;
            
            cartItems.addEventListener('mousedown', (e) => {
                isScrolling = true;
                startX = e.pageX - cartItems.offsetLeft;
                scrollLeft = cartItems.scrollLeft;
            });
            
            cartItems.addEventListener('mouseleave', () => {
                isScrolling = false;
            });
            
            cartItems.addEventListener('mouseup', () => {
                isScrolling = false;
            });
            
            cartItems.addEventListener('mousemove', (e) => {
                if (!isScrolling) return;
                e.preventDefault();
                const x = e.pageX - cartItems.offsetLeft;
                const walk = (x - startX) * 2;
                cartItems.scrollLeft = scrollLeft - walk;
            });
            
            // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            cartItems.addEventListener('touchstart', (e) => {
                isScrolling = true;
                startX = e.touches[0].pageX - cartItems.offsetLeft;
                scrollLeft = cartItems.scrollLeft;
            });
            
            cartItems.addEventListener('touchend', () => {
                isScrolling = false;
            });
            
            cartItems.addEventListener('touchmove', (e) => {
                if (!isScrolling) return;
                e.preventDefault();
                const x = e.touches[0].pageX - cartItems.offsetLeft;
                const walk = (x - startX) * 2;
                cartItems.scrollLeft = scrollLeft - walk;
            });
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
            document.querySelectorAll('.category').forEach(cat => {
                cat.addEventListener('click', (e) => {
                    const categoryName = cat.textContent;
                    selectCategory(categoryName);
                    
                    // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                    cat.scrollIntoView({
                        behavior: 'smooth',
                        inline: 'center',
                        block: 'nearest'
                    });
                });
            });

            // –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    const page = item.dataset.page;
                    showPage(page);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é
                    document.querySelectorAll('.menu-item').forEach(i => {
                        i.classList.remove('active');
                    });
                    item.classList.add('active');
                });
            });

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('add-to-cart')) {
                    const productId = parseInt(e.target.dataset.id);
                    addToCart(productId);
                }
                
                if (e.target.classList.contains('cart-item-remove')) {
                    const productId = parseInt(e.target.dataset.id);
                    removeFromCart(productId);
                }
            });

            // –ö–Ω–æ–ø–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã
            document.getElementById('checkout-btn')?.addEventListener('click', () => {
                checkout();
            });
            
            document.getElementById('clear-cart')?.addEventListener('click', () => {
                clearCart();
            });
            
            // –ö–Ω–æ–ø–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–Ω–µ–∞–∫—Ç–∏–≤–Ω–∞—è)
            document.getElementById('support-btn')?.addEventListener('click', () => {
                showNotification('–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞');
            });
            
            // –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞
            document.querySelector('.logout-btn')?.addEventListener('click', () => {
                if (confirm('–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞?')) {
                    localStorage.removeItem('shopState');
                    location.reload();
                }
            });
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('change', (e) => {
                    const isDark = e.target.checked;
                    toggleTheme(isDark);
                });
            }
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            const notificationsToggle = document.getElementById('notifications-toggle');
            if (notificationsToggle) {
                notificationsToggle.addEventListener('change', (e) => {
                    state.notifications = e.target.checked;
                    saveState();
                    showNotification(`–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ${state.notifications ? '–≤–∫–ª—é—á–µ–Ω—ã' : '–≤—ã–∫–ª—é—á–µ–Ω—ã'}`);
                });
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        function toggleTheme(isDark) {
            if (isDark) {
                document.body.classList.add('dark-theme');
                state.theme = 'dark';
                tg.setBackgroundColor('#121212');
            } else {
                document.body.classList.remove('dark-theme');
                state.theme = 'light';
                tg.setBackgroundColor('#f8f8f8');
            }
            saveState();
        }

        // –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function selectCategory(categoryName) {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            document.querySelectorAll('.category').forEach(c => {
                c.classList.remove('active');
            });
            
            // –ù–∞—Ö–æ–¥–∏–º –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            const categories = Array.from(document.querySelectorAll('.category'));
            const selectedCat = categories.find(cat => cat.textContent === categoryName);
            if (selectedCat) {
                selectedCat.classList.add('active');
                state.selectedCategory = categoryName;
                renderProducts(categoryName);
                saveState();
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
        function showPage(pageName) {
            console.log('–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É:', pageName);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            const pageElement = document.getElementById(`${pageName}-page`);
            if (pageElement) {
                pageElement.classList.add('active');
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Ç–æ–ª—å–∫–æ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π)
            const categoriesElement = document.querySelector('.categories-wrapper');
            const marqueeElement = document.querySelector('.marquee');
            
            if (pageName === 'main') {
                categoriesElement.style.display = 'flex';
                marqueeElement.style.display = 'block';
            } else {
                categoriesElement.style.display = 'none';
                marqueeElement.style.display = 'none';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            state.currentPage = pageName;
            
            switch(pageName) {
                case 'cart':
                    renderCart();
                    break;
                case 'profile':
                    updateProfile();
                    break;
                case 'main':
                    renderProducts(state.selectedCategory);
                    break;
            }
            
            saveState();
        }

        // –†–µ–Ω–¥–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤
        function renderProducts(category = '–í—Å–µ —Ç–æ–≤–∞—Ä—ã') {
            const container = document.getElementById('products');
            if (!container) return;
            
            container.innerHTML = '';
            
            const filteredProducts = category === '–í—Å–µ —Ç–æ–≤–∞—Ä—ã' 
                ? products 
                : products.filter(p => p.category === category);
            
            if (filteredProducts.length === 0) {
                container.innerHTML = '<div class="empty-message">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }
            
            filteredProducts.forEach(product => {
                const inCart = state.cart.find(item => item.id === product.id);
                const quantity = inCart ? inCart.quantity : 0;
                
                const productElement = document.createElement('div');
                productElement.className = 'product-card';
                productElement.innerHTML = `
                    <div class="product-image"></div>
                    <div class="product-info">
                        <div class="product-title">${product.name}</div>
                        <div class="product-desc">${product.desc}</div>
                        <div class="product-price">${product.price.toLocaleString()} ‚ÇΩ</div>
                        <button class="add-to-cart" data-id="${product.id}">
                            ${quantity > 0 ? `‚úì –í –∫–æ—Ä–∑–∏–Ω–µ (${quantity})` : '–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É'}
                        </button>
                    </div>
                `;
                container.appendChild(productElement);
            });
        }

        // –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
        function addToCart(productId) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞ –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º
            if (!botIsOnline) {
                showNotification('–ú–∞–≥–∞–∑–∏–Ω –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ë–æ—Ç –≤—ã–∫–ª—é—á–µ–Ω.');
                return;
            }
            
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const existing = state.cart.find(item => item.id === productId);
            
            if (existing) {
                existing.quantity += 1;
            } else {
                state.cart.push({ 
                    ...product, 
                    quantity: 1,
                    addedAt: new Date().toISOString()
                });
            }
            
            updateCartBadge();
            saveState();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            if (state.currentPage === 'main') {
                renderProducts(state.selectedCategory);
            }
            
            // –ï—Å–ª–∏ –º—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ—Ä–∑–∏–Ω—ã, –æ–±–Ω–æ–≤–ª—è–µ–º –µ—ë
            if (state.currentPage === 'cart') {
                renderCart();
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–î–æ–±–∞–≤–ª–µ–Ω–æ: ${product.name}`);
        }

        // –£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
        function removeFromCart(productId) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞ –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º
            if (!botIsOnline) {
                showNotification('–ú–∞–≥–∞–∑–∏–Ω –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ë–æ—Ç –≤—ã–∫–ª—é—á–µ–Ω.');
                return;
            }
            
            state.cart = state.cart.filter(item => item.id !== productId);
            
            updateCartBadge();
            saveState();
            renderCart();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∞
            if (state.currentPage === 'main') {
                renderProducts(state.selectedCategory);
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –±–µ–π–¥–∂ –∫–æ—Ä–∑–∏–Ω—ã
        function updateCartBadge() {
            const badge = document.querySelector('.cart-badge');
            const totalItems = state.cart.reduce((sum, item) => sum + item.quantity, 0);
            
            if (badge) {
                if (totalItems > 0) {
                    badge.textContent = totalItems > 9 ? '9+' : totalItems;
                    badge.classList.remove('hidden');
                } else {
                    badge.classList.add('hidden');
                }
            }
        }

        // –†–µ–Ω–¥–µ—Ä –∫–æ—Ä–∑–∏–Ω—ã
        function renderCart() {
            const container = document.getElementById('cart-items');
            const totalPriceElement = document.getElementById('total-price');
            const emptyMessage = document.getElementById('cart-empty');
            const checkoutBtn = document.getElementById('checkout-btn');
            const clearBtn = document.getElementById('clear-cart');
            const cartFooter = document.querySelector('.cart-footer');
            
            if (!container) return;
            
            container.innerHTML = '';
            
            if (state.cart.length === 0) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–æ—Ä–∑–∏–Ω—ã
                if (state.currentPage === 'cart') {
                    emptyMessage.style.display = 'block';
                } else {
                    emptyMessage.style.display = 'none';
                }
                if (checkoutBtn) checkoutBtn.disabled = true;
                if (clearBtn) clearBtn.disabled = true;
                if (totalPriceElement) totalPriceElement.textContent = '0 ‚ÇΩ';
                
                // –ï—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞, —Å–∫—Ä—ã–≤–∞–µ–º –∏—Ç–æ–≥–æ–≤—É—é –ø–∞–Ω–µ–ª—å
                if (cartFooter) cartFooter.classList.add('hidden');
                return;
            }
            
            emptyMessage.style.display = 'none';
            if (cartFooter) cartFooter.classList.remove('hidden');
            
            if (checkoutBtn) checkoutBtn.disabled = false;
            if (clearBtn) clearBtn.disabled = false;
            
            let total = 0;
            
            state.cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <div class="cart-item-info">
                        <div class="cart-item-title">${item.name}</div>
                        <div class="cart-item-desc">${item.desc}</div>
                        <div class="cart-item-price">${item.price.toLocaleString()} ‚ÇΩ √ó ${item.quantity}</div>
                    </div>
                    <div class="cart-item-controls">
                        <div class="cart-item-quantity">${itemTotal.toLocaleString()} ‚ÇΩ</div>
                        <button class="cart-item-remove" data-id="${item.id}" title="–£–¥–∞–ª–∏—Ç—å">√ó</button>
                    </div>
                `;
                container.appendChild(itemElement);
            });
            
            if (totalPriceElement) {
                totalPriceElement.textContent = `${total.toLocaleString()} ‚ÇΩ`;
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
        function updateProfile() {
            // –ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ—Ñ–∏–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ Telegram
        }

        // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
        function clearCart() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞ –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º
            if (!botIsOnline) {
                showNotification('–ú–∞–≥–∞–∑–∏–Ω –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ë–æ—Ç –≤—ã–∫–ª—é—á–µ–Ω.');
                return;
            }
            
            if (state.cart.length === 0 || !confirm('–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É?')) return;
            
            state.cart = [];
            updateCartBadge();
            saveState();
            renderCart();
            
            if (state.currentPage === 'main') {
                renderProducts(state.selectedCategory);
            }
            
            showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞');
        }

        // –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
        function checkout() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞ –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º
            if (!botIsOnline) {
                showNotification('–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑. –ë–æ—Ç –º–∞–≥–∞–∑–∏–Ω–∞ –≤—ã–∫–ª—é—á–µ–Ω.');
                return;
            }
            
            if (state.cart.length === 0) {
                showNotification('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
                return;
            }
            
            const total = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const finalPrice = Math.max(0, total - state.balance);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω—ã
            const confirmDialog = `
                <div class="checkout-dialog" style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.5);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10000;
                    padding: 20px;
                ">
                    <div style="
                        background: ${state.theme === 'dark' ? '#2e2e2e' : 'white'};
                        color: ${state.theme === 'dark' ? '#e0e0e0' : '#333'};
                        border-radius: 15px;
                        padding: 25px;
                        max-width: 400px;
                        width: 100%;
                        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                    ">
                        <h3 style="margin: 0 0 15px 0; color: ${state.theme === 'dark' ? '#64B5F6' : '#2196F3'};">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
                        
                        <div style="margin-bottom: 20px;">
                            <p>–¢–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω–µ: <strong>${state.cart.reduce((sum, item) => sum + item.quantity, 0)} —à—Ç.</strong></p>
                            <p>–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <strong>${total.toLocaleString()} ‚ÇΩ</strong></p>
                            <p style="font-size: 18px; color: ${state.theme === 'dark' ? '#64B5F6' : '#2196F3'}; font-weight: bold; margin-top: 10px;">
                                –ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ: <strong>${finalPrice.toLocaleString()} ‚ÇΩ</strong>
                            </p>
                        </div>
                        
                        <div style="display: flex; gap: 10px;">
                            <button id="confirm-order" style="
                                flex: 1;
                                padding: 12px;
                                background: ${state.theme === 'dark' ? '#64B5F6' : '#2196F3'};
                                color: white;
                                border: none;
                                border-radius: 10px;
                                font-weight: 600;
                                cursor: pointer;
                            ">–û–ø–ª–∞—Ç–∏—Ç—å</button>
                            
                            <button id="cancel-order" style="
                                flex: 1;
                                padding: 12px;
                                background: ${state.theme === 'dark' ? '#3e3e3e' : '#f5f5f5'};
                                color: ${state.theme === 'dark' ? '#e0e0e0' : '#666'};
                                border: none;
                                border-radius: 10px;
                                font-weight: 600;
                                cursor: pointer;
                            ">–û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                </div>
            `;
            
            const dialogElement = document.createElement('div');
            dialogElement.innerHTML = confirmDialog;
            document.body.appendChild(dialogElement.firstChild);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –¥–∏–∞–ª–æ–≥–∞
            document.getElementById('confirm-order').addEventListener('click', () => {
                processOrder(total, finalPrice);
                dialogElement.remove();
            });
            
            document.getElementById('cancel-order').addEventListener('click', () => {
                dialogElement.remove();
                showNotification('–ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω');
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –¥–∏–∞–ª–æ–≥–∞
            dialogElement.firstChild.addEventListener('click', (e) => {
                if (e.target === dialogElement.firstChild) {
                    dialogElement.remove();
                    showNotification('–ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω');
                }
            });
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–∞
        function processOrder(total, finalPrice) {
            const orderData = {
                type: 'order',
                cart: state.cart,
                total: total,
                balance: state.balance,
                balanceUsed: Math.min(state.balance, total),
                finalPrice: finalPrice,
                timestamp: new Date().toISOString(),
                shop: '–ú–æ–π –º–∞–≥–∞–∑–∏–Ω',
                user: tg.initDataUnsafe.user
            };
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram –±–æ—Ç–∞
            if (tg && tg.sendData) {
                tg.sendData(JSON.stringify(orderData));
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
            showNotification(`–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω –Ω–∞ ${finalPrice.toLocaleString()} ‚ÇΩ!`, 5000);
            
            // –û—á–∏—â–∞–µ–º –∫–æ—Ä–∑–∏–Ω—É –ø–æ—Å–ª–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
            state.cart = [];
            state.balance = Math.max(0, state.balance - Math.min(state.balance, total));
            updateCartBadge();
            saveState();
            renderCart();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, duration = 3000) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–∫–ª—é—á–µ–Ω—ã –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            if (!state.notifications) return;
            
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${state.theme === 'dark' ? '#64B5F6' : '#2196F3'};
                color: white;
                padding: 12px 24px;
                border-radius: 25px;
                box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
                z-index: 10000;
                font-weight: 500;
                animation: slideIn 0.3s ease;
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –∞–Ω–∏–º–∞—Ü–∏–∏
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { top: -50px; opacity: 0; }
                    to { top: 20px; opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // –£–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, duration);
        }

        // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
        console.log('–ú–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω');
        console.log('Web App URL:', window.location.href);
        console.log('Telegram WebApp –¥–æ—Å—Ç—É–ø–µ–Ω:', !!tg);
        console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram:', tg.initDataUnsafe.user);
    </script>
</body>
</html>